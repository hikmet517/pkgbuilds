#Maintainer Mike Harris <mike.a.harris@outlook.com>
_pkgname=CANopenEditor
pkgname=canopeneditor-bin
pkgver=v4.2
pkgrel=1
pkgdesc="CANopen Object Dictionary Editor"
url="https://github.com/CANopenNode/CANopenEditor"
arch=('x86_64')
license=('GPL')
depends=("mono")
source=("git+https://github.com/CANopenNode/CANopenEditor#branch=build"
        "CANopenEditor.desktop"
        "EDSEditor.exe")
md5sums=("SKIP"
         "SKIP"
         "SKIP")

pkgver() {
    cd "$srcdir/$_pkgname"
    printf '%s' "$(git log -1 --pretty=%B | grep -E -o 'v[[:digit:]]+\.[[:digit:]]')"
}

package(){
    cd "$srcdir/$_pkgname"
    mkdir -p "$pkgdir/opt/$_pkgname"
    cp -r * "$pkgdir/opt/$_pkgname/"
    mkdir -p "$pkgdir/usr/share/applications/"
    cp "$srcdir/CANopenEditor.desktop" "$pkgdir/usr/share/applications/"
    cp -f "$srcdir/EDSEditor.exe" "$pkgdir/opt/$_pkgname/"
}
